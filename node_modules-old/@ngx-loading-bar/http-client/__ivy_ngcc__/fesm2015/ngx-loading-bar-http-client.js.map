{"version":3,"file":"ngx-loading-bar-http-client.js","sources":["@ngx-loading-bar/http-client/loading-bar.interceptor.ts","@ngx-loading-bar/http-client/http.module.ts"],"names":[],"mappings":"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","sourcesContent":["import { LoadingBarService } from '@ngx-loading-bar/core';\nimport { Injectable } from '@angular/core';\nimport { HttpEvent, HttpInterceptor, HttpHandler, HttpRequest, HttpEventType } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { finalize } from 'rxjs/operators';\n\n@Injectable()\nexport class LoadingBarInterceptor implements HttpInterceptor {\n  constructor(private loadingBar: LoadingBarService) {}\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    // https://github.com/angular/angular/issues/18155\n    if (req.headers.has('ignoreLoadingBar')) {\n      return next.handle(req.clone({ headers: req.headers.delete('ignoreLoadingBar') }));\n    }\n\n    const r = next.handle(req);\n\n    let started = false;\n    const responseSubscribe = r.subscribe.bind(r);\n    r.subscribe = (...args) => {\n      this.loadingBar.start();\n      started = true;\n      return responseSubscribe(...args);\n    };\n\n    return r.pipe(\n      finalize(() => started && this.loadingBar.complete()),\n    );\n  }\n}\n","import { LoadingBarModule, LoadingBarService } from '@ngx-loading-bar/core';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { LoadingBarInterceptor } from './loading-bar.interceptor';\n\n@NgModule({\n  imports: [\n    HttpClientModule,\n    LoadingBarModule,\n  ],\n  exports: [\n    HttpClientModule,\n    LoadingBarModule,\n  ],\n  providers: [\n    { provide: HTTP_INTERCEPTORS, useClass: LoadingBarInterceptor, multi: true },\n  ],\n})\nexport class LoadingBarHttpClientModule {}\n"]}